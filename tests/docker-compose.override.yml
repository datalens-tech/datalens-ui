version: "3.7"

services:
  us:
    build:
      context: ../datalens-us
      dockerfile: ../datalens-us/Dockerfile
    depends_on:
      - postgres-connection
    environment:
      USE_E2E_MOCK_DATA: 1
    volumes:
      - e2e-data-volume:/opt/e2e-data

  datalens:
    build:
      context: ../datalens-ui
      dockerfile: ../datalens-ui/Dockerfile
    image: result/latest
    volumes:
      - e2e-data-volume:/opt/app/tests/data

volumes:
  e2e-data-volume: